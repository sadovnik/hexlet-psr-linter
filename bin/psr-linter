#!/usr/bin/env php
<?php

require_once __DIR__ . '/../vendor/autoload.php';

list ($script, $file) = $argv;

use PsrLinter\Linter;
use PsrLinter\Cli\Io;
use PsrLinter\Cli\ErrorPrinter;

$linter = new Linter;
$code = Io::read($file);
$result = $linter->lint($code);

if ($result === true) {
    echo 'Code is valid!';
} else {
    echo 'ğŸ›  Code is not valid. Errors: ' . PHP_EOL;
    ErrorPrinter::print($result);
}

echo PHP_EOL;

